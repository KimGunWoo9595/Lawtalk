<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http//mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="User">
	<!-- 회원가입 -->
   <insert id ="join" parameterType="userVO"> 
   insert into tbl_user_register
   (user_num, user_id, user_name, user_email, user_pw, user_phone_num, user_gender, user_birth, user_kakao_email, user_facebook_email)
   values(0, #{userId}, #{userName}, #{userEmail}, #{userPw}, #{userPhoneNum}, #{userGender}, #{userBirth}, #{userKakaoEmail}, #{userFacebookEmail})
   </insert>
   
   
   <!--아이디 중복검사  -->
   <select id ="checkId" parameterType ="string" resultType="int">   
      select count(user_id) from tbl_user_register where user_id = #{userId}
   </select>
	
	<!-- 회원목록 -->
	<select id="selectUsers" resultType="userVO">
		select user_num, user_id, user_name, user_pw, user_gender, user_birth, user_email, user_phone_num
		from tbl_user_register order by user_name desc
	</select>
	
	
	<!-- 로그인 -->
	<select id="loginOk" parameterType="map" resultType="int">
		select user_num from tbl_user_register
		where user_id = #{userId} and user_pw = #{userPw}
	</select>
   
   <!-- 계정 탈퇴  -->
   <delete id="UserdeleteAccount" parameterType="_int">
      delete from tbl_user_register
      where user_num =  #{userNum}
   </delete>
   
   <!-- 회원 이메일 수정  -->
   <update id ="UserEmailUpdate" parameterType ="userVO" >
   update tbl_user_register
   set user_email=#{userEmail}
   where user_num= #{userNum}
   </update>
   
   <!-- 비밀번호 변경 -->
   	<update id ="PwChange" parameterType= "userVO">
		update tbl_user_register
		set user_pw = #{userPw}
		where user_num = #{userNum}
	</update>
	
	<!-- 비밀번호 체크 -->
	<select id ="UserPwcheck" parameterType="userVO">
		select user_pw from tbl_user_regiser
		where user_num = #{userNum} and user_pw =#{userPw}
	</select>

	
</mapper>

